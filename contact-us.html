<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - P.A.R.T.S</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Contact Us</h1>
    </header>
    <!-- Navigation -->
    <nav>
        <ul class="tabs">
          <li><a href="index.html">Home</a></li>
          <li><a href="how-to-use.html">How to Use</a></li>
          <li><a href="shop.html">Shop</a></li>
          <li><a href="contact-us.html">Contact Us</a></li>
          <li><a href="about.html">About the Creators</a></li>
          <li><a href="resources.html">Resources</a></li> <!-- New Resources Tab -->
          <div class="cart-icon">
              <a href="cart.html">ðŸ›’ <span id="cart-count">0</span></a>
          </div>
        </ul>
    </nav>
    <!-- Main Content -->
    <main>
        <div class="contact-container">
            <p style="color: green; background-color: lightblue; padding: 10px; border-radius: 5px;">
                Weâ€™d love to hear from you! Submit your inquiries or feedback through our form, and our team will respond within 24 hours.
            </p>

            <h1>Contact Us</h1>
            <form id="contact-form">
                <label for="name">Name:</label>
                <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    placeholder="Your Name" 
                    required
                    oninput="validateName()"
                >
                <small id="name-error" style="color: red; display: none;">
                    Please enter letters only. No numbers or special characters are allowed.
                </small>                

                <label for="email">Email:</label>
                <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    placeholder="Your Email" 
                    required
                    oninput="validateEmail()"
                >
                <small id="email-error" style="color: red; display: none;">
                    Please enter a valid email address.
                </small>

                <label for="message">Message:</label>
                <textarea 
                    id="message" 
                    name="message" 
                    placeholder="Your Message" 
                    rows="5" 
                    required
                ></textarea>

                <button type="submit">Submit</button>
            </form>
            <p id="response-message"></p>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>Â© 2024 P.A.R.T.S</p>
    </footer>

    <!-- JavaScript -->
    <script src="script.js"></script>
    <script>
        document.getElementById('contact-form').addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent default form submission

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;

            try {
                const response = await fetch('http://localhost:3000/submit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, message }),
                });

                if (response.ok) {
                    document.getElementById('response-message').innerText = 'Thank you for your message! We will get back to you soon.';
                    document.getElementById('response-message').style.color = 'green';
                    this.reset();
                } else {
                    document.getElementById('response-message').innerText = 'Error: Unable to send your message. Please try again.';
                    document.getElementById('response-message').style.color = 'red';
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('response-message').innerText = 'Error: Unable to send your message. Please try again.';
                document.getElementById('response-message').style.color = 'red';
            }
        });

        function validateName() {
            const nameInput = document.getElementById('name');
            const errorMessage = document.getElementById('name-error');
            const regex = /^[A-Za-z\s]+$/;

            if (nameInput.value && !regex.test(nameInput.value)) {
                errorMessage.style.display = 'inline';
            } else {
                errorMessage.style.display = 'none';
            }
        }

        function validateEmail() {
            const emailInput = document.getElementById('email');
            const errorMessage = document.getElementById('email-error');
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (emailInput.value && !regex.test(emailInput.value)) {
                errorMessage.style.display = 'inline';
            } else {
                errorMessage.style.display = 'none';
            }
        }
    </script>
</body>
</html>
